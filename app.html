<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Spell Right Pro</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f6f8;
      padding: 20px;
    }
    .card {
      background: #fff;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      max-width: 600px;
      margin: auto;
      text-align: center;
    }
    input[type="text"] {
      padding: 10px;
      width: 80%;
      margin: 10px auto;
      font-size: 16px;
    }
    button {
      padding: 10px 20px;
      margin: 5px;
      font-size: 16px;
      border: none;
      border-radius: 6px;
      background-color: #007BFF;
      color: white;
      cursor: pointer;
    }
    button:hover {
      background-color: #0056b3;
    }
    .hidden-word {
      display: none;
      margin-top: 10px;
      font-weight: bold;
    }
    .status {
      margin-top: 10px;
      font-weight: bold;
    }
    .trainer-section button,
    .trainer-section input,
    .trainer-section .status,
    .trainer-section .hidden-word {
      display: none;
    }
  </style>
</head>
<body>
  <div class="card">
    <h2>Spell Right Pro</h2>
    <p>Upload or enter words. Practice one word at a time.</p>
    <input type="file" id="fileUpload" accept=".txt" /><br />
    <textarea id="wordInput" rows="4" placeholder="Enter words, one per line..." style="width:100%; margin:10px 0;"></textarea><br />
    <button onclick="addWords()">Start Practice</button>

    <div id="trainer" class="trainer-section">
      <button id="speakBtn" onclick="speakWord()">üîä Speak</button><br />
      <input type="text" id="userInput" placeholder="Type what you heard" oninput="enableCheck()" disabled />
      <br />
      <button id="checkBtn" onclick="checkSpelling()" disabled>‚úîÔ∏è Check</button>
      <div class="status" id="status"></div>
      <button id="revealBtn" onclick="revealWord()" style="display:none;">üëÅ Reveal</button>
      <div class="hidden-word" id="hiddenWord"></div>
      <br />
      <button id="nextBtn" onclick="nextWord()" disabled>‚û°Ô∏è Next</button>
    </div>
  </div>

  <script>
    let words = [];
    let index = 0;
    let currentAccent = 'en-GB';

    function addWords() {
      const inputText = document.getElementById("wordInput").value.trim();
      const inputWords = inputText.split(/\n+/).map(w => w.trim()).filter(Boolean);
      words = inputWords;
      index = 0;
      if (words.length > 0) {
        document.getElementById("trainer").style.display = "block";
        document.getElementById("speakBtn").style.display = "inline-block";
        loadWord();
      }
    }

    function speakWord() {
      if (!words[index]) return;
      const utterance = new SpeechSynthesisUtterance(words[index]);
      utterance.lang = currentAccent;
      utterance.onend = () => {
        document.getElementById("userInput").disabled = false;
        document.getElementById("checkBtn").disabled = false;
      };
      speechSynthesis.speak(utterance);
    }

    function enableCheck() {
      document.getElementById("checkBtn").disabled = false;
    }

    function checkSpelling() {
      const userInput = document.getElementById("userInput").value.trim().toLowerCase();
      const correctWord = words[index].toLowerCase();
      const status = document.getElementById("status");
      if (userInput === correctWord) {
        status.textContent = "‚úÖ Correct!";
        status.style.color = "green";
      } else {
        status.textContent = "‚ùå Wrong";
        status.style.color = "red";
        document.getElementById("revealBtn").style.display = "inline-block";
      }
      document.getElementById("nextBtn").disabled = false;
      document.getElementById("checkBtn").disabled = true;
      document.getElementById("userInput").disabled = true;
    }

    function revealWord() {
      document.getElementById("hiddenWord").textContent = words[index];
      document.getElementById("hiddenWord").style.display = "block";
    }

    function nextWord() {
      index++;
      if (index < words.length) {
        loadWord();
      } else {
        alert("You've completed the list!");
        document.getElementById("trainer").style.display = "none";
      }
    }

    function loadWord() {
      document.getElementById("userInput").value = "";
      document.getElementById("userInput").disabled = true;
      document.getElementById("checkBtn").disabled = true;
      document.getElementById("nextBtn").disabled = true;
      document.getElementById("status").textContent = "";
      document.getElementById("hiddenWord").textContent = "";
      document.getElementById("hiddenWord").style.display = "none";
      document.getElementById("revealBtn").style.display = "none";
    }

    document.getElementById("fileUpload").addEventListener("change", function(e) {
      const file = e.target.files[0];
      if (!file) return;

      const reader = new FileReader();
      reader.onload = function(evt) {
        document.getElementById("wordInput").value = evt.target.result;
      };
      reader.readAsText(file);
    });
  </script>
</body>
</html>
